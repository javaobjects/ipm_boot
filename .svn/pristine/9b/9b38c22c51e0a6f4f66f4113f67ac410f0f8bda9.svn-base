<!--[if IE]>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<![endif]-->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
        <script type="text/javascript" src="../res/resource/js/plugins/jquery-1.7.2.js"></script>
		<script type="text/javascript" src="../res/resource/js/ext-3.0.0/adapter/ext/ext-base.js"></script>
		<script type="text/javascript" src="../res/resource/js/ext-3.0.0/ext-all.js"></script>
		<script type="text/javascript" src="../res/resource/js/ext-3.0.0/ux/PagingMemoryProxy.js"></script>
        <link rel="stylesheet" type="text/css" href="../res/resource/js/ext-3.0.0/ux/css/ux-all.css" />
		<link rel="stylesheet" type="text/css" href="../res/resource/js/ext-3.0.0/resources/css/ext-all.css"/>
		
       
 <script type="text/javascript">
 var  store=null;
 window.onload = function() { 
   var loadMarsk = new Ext.LoadMask(document.body, {
			msg : '数据加载中。。。。。。',
			store:store
			});
			loadMarsk .show(); //显示
	 $.ajax({  
           url: "/cgi-bin/iDigger.cgi?url=/packet_len",
           method: "POST",  
           success : function(r) {
	  	      store = new Ext.data.JsonStore({
	  				fields:['Topic / Item','Count','Average','Min val','Max val','Rate (ms)',
	  				        'Percent','Burst rate','Burst start'],
	  				data:Ext.decode(r)
	  		    }); 
					loadMarsk .hide();
			var orgGrid=Ext.get("orgGrid");  //展示grid的容器
	  	     var grid = new Ext.grid.GridPanel({
	  		        store: store,
	  		        id:"grid",
	  		    viewConfig : {
	  		        forceFit : true //让grid的列自动填满grid的整个宽度，不用一列一列的设定宽度。
	  		        },
	  		        renderTo: Ext.getBody(),
	  		        columns: [
	  		            {id:'no', header: "Topic / Item",dataIndex: 'Topic / Item'},
			            {header: "Count",  dataIndex: 'Count'},
			            {header: "Average",  dataIndex: 'Average'},
			            {header: "Min val",  dataIndex: 'Min val'},
			            {header: "Max val",  dataIndex: 'Max val'},
			            {header: "Rate (ms)",  dataIndex: 'Rate (ms)'},
			            {header: "Percent",  dataIndex: 'Percent'},
			            {header: "Burst rate",  dataIndex: 'Burst rate'},
			            {header: "Burst start",  dataIndex: 'Burst start'}
	  		            
	  		        ],
	  		        loadMask:"正在加载..",
	  		        stripeRows: true,
	  		        autoExpandColumn: 'no',
	  		        width:orgGrid.getComputedWidth(),
                       height:document.documentElement.clientHeight,
	  	  		    });
	  	            	   grid.render(orgGrid);  //把grid铺到id为grid的容器中
						  window.onresize=function(){
								grid.setWidth(0);
								grid.setWidth(orgGrid.getComputedWidth());
						};
    }
  });	
};  

</script> 
</head>

<body>
<div id="orgGrid"></div>
</body>
</html>
